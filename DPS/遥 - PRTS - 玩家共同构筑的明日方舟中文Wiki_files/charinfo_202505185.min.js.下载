(window.RLQ=window.RLQ||[]).push(["jquery",function(){function a(){var a=Object.keys(I);for(var s in-1!=a.indexOf(char_info.group)?$(".charlogo-def").append('<div class="charlogo-def-img" style="background-image:url('+I[char_info.group]+')"></div>'):$(".charlogo-def").append('<div class="charlogo-def-img" style="filter:invert(1);opacity:.3;background-image:url(//media.prts.wiki/'+getPath("Logo_"+char_info.group+".png")+');"></div>'),charskin_params)""!=charskin_params[s].name&&$(".charlogo-skin").append('<div class="charlogo-img img-out" data-logo="'+s+'" style="opacity:0;background-image: url('+charskin_params[s].logo_url+');"></div>')}function s(a){var s=0;if(""!=U){for(var i in char_info.cv)if(""!=char_info.cv[i].name){s=1,""==a&&(a=i,J=i);let t='<div class="charcv-select" data-cvtype="'+i+'" data-cvname="'+char_info.cv[i].name+'"><div class="cvcheck charcv-uncheck"></div><div class="cvcontent charcv-uncheck-content"><div class="cv-type">'+i+'</div><div class="cv-name">'+char_info.cv[i].name+"</div></div></div>";$(".charcv-content").append(t)}if(1==s){$(".charcv-select[data-cvtype="+a+"]").find(".cvcheck").removeClass("charcv-uncheck").addClass("charcv-check"),$(".charcv-select[data-cvtype="+a+"]").find(".cvcontent").removeClass("charcv-uncheck-content").addClass("charcv-check-content"),temp_cv_list=char_info.cv[a].name.split(","),$(".charcv-text").html("");for(i=0;i<temp_cv_list.length;i++)0==i?($(".charcv-text").html(""),$(".charcv-text").append('<a href="https://prts.wiki/w/配音一览#'+J+"："+temp_cv_list[i]+'">'+temp_cv_list[i]+"</a>")):$(".charcv-text").append(' & <a href="https://prts.wiki/w/配音一览#'+J+"："+temp_cv_list[i]+'">'+temp_cv_list[i]+"</a>")}}}function i(){var a=0;if(""!=U){for(var s in $(".charcv-content").html(""),char_info.cv)if(""!=char_info.cv[s].name){a=1;let i='<div class="charcv-select" data-cvtype="'+s+'" data-cvname="'+char_info.cv[s].name+'"><div class="cvcheck charcv-uncheck"></div><div class="cvcontent charcv-uncheck-content"><div class="cv-type">'+s+'</div><div class="cv-name">'+char_info.cv[s].name+"</div></div></div>";$(".charcv-content").append(i)}if(1==a){$(".charcv-select[data-cvtype="+J+"]").find(".cvcheck").removeClass("charcv-uncheck").addClass("charcv-check"),$(".charcv-select[data-cvtype="+J+"]").find(".cvcontent").removeClass("charcv-uncheck-content").addClass("charcv-check-content"),temp_cv_list=char_info.cv[J].name.split(","),$(".charcv-text").html("");for(s=0;s<temp_cv_list.length;s++)0==s?($(".charcv-text").html(""),$(".charcv-text").append('<a href="https://prts.wiki/w/配音一览#'+J+"："+temp_cv_list[s]+'">'+temp_cv_list[s]+"</a>")):$(".charcv-text").append(' & <a href="https://prts.wiki/w/配音一览#'+J+"："+temp_cv_list[s]+'">'+temp_cv_list[s]+"</a>")}}}function t(){for(var a in $(".charcv-content").html(""),char_info.cv)if(""!=char_info.cv[a][D]){hasCv=1;let s='<div class="charcv-select" data-cvtype="'+a+'" data-cvname="'+char_info.cv[a][D]+'"><div class="cvcheck charcv-uncheck"></div><div class="cvcontent charcv-uncheck-content"><div class="cv-type">'+a+'</div><div class="cv-name">'+char_info.cv[a][D]+"</div></div></div>";$(".charcv-content").append(s)}if(1==hasCv){$(".charcv-select[data-cvtype="+J+"]").find(".cvcheck").removeClass("charcv-uncheck").addClass("charcv-check"),$(".charcv-select[data-cvtype="+J+"]").find(".cvcontent").removeClass("charcv-uncheck-content").addClass("charcv-check-content"),temp_cv_list=char_info.cv[J][D].split(","),$(".charcv-text").html("");for(a=0;a<temp_cv_list.length;a++)0==a?($(".charcv-text").html(""),$(".charcv-text").append('<a href="https://prts.wiki/w/配音一览#'+J+"："+temp_cv_list[a]+'">'+temp_cv_list[a]+"</a>")):$(".charcv-text").append(' & <a href="https://prts.wiki/w/配音一览#'+J+"："+temp_cv_list[a]+'">'+temp_cv_list[a]+"</a>")}}function c(){for(var a in charimg_params){let s=Object.keys(charimg_params),i=s.indexOf(a),t="";0==i&&(t="零"),1==i&&(t="一"),2==i&&(t="二"),a==U?$(".stage-btn-wrapper").append('<div class="stage-btn" elite="'+i+'"><div class="stage-btn-img"><img src="https://static.prts.wiki/charinfo/img/ui/elite'+i+'.png"></div><div class="stage-btn-blue" style="opacity: 1;"><img src="https://static.prts.wiki/charinfo/img/ui/elite'+i+'_blue.png"></div><div class="stage-btn-en">ELITE'+i+'</div><div class="stage-btn-text" style="color:#1ac2fd">精英'+t+"</div></div>"):""!=charimg_params[a].url&&$(".stage-btn-wrapper").append('<div class="stage-btn" elite="'+i+'"><div class="stage-btn-img"><img src="https://static.prts.wiki/charinfo/img/ui/elite'+i+'.png"></div><div class="stage-btn-blue" style="opacity: 0;"><img src="https://static.prts.wiki/charinfo/img/ui/elite'+i+'_blue.png"></div><div class="stage-btn-en">ELITE'+i+'</div><div class="stage-btn-text">精英'+t+"</div></div>")}}function n(){for(var a in charimg_params)a==U?$("#charimg").append('<img id="img-'+a+'" src="'+charimg_params[a].url+'" width="100%" style="opacity:0" class="img-in">'):""!=charimg_params[a].url&&$("#charimg").append('<img id="img-'+a+'" src="'+charimg_params[a].url+'" width="100%" style="opacity:0" class="img-out">')}function e(){let a=$("#charimg-wrapper").css("transform"),s=a.replace("matrix(","").replace(")","").split(",");return s=s.slice(s.length-2,s.length),s}function r(a,s={}){function i(a){let s=G;r={x:parseInt(e()[0]),y:parseInt(e()[1])};const i=a.deltaY<0,{x:t,y:c}=a,n=d.offsetHeight*s,p=d.offsetWidth*s,{top:l,left:m}=A.getBoundingClientRect();i?(s+=u,s>f&&(s=f,o("已经是最大了喵")),G=s):(s-=u,k&&s<k&&(s=k,o("已经是最小了喵")),G=s);let h=(c-l-r.y)/n,g=(t-m-r.x)/p;const $=512*s,v=512*s,b=h*(v-n),_=g*($-p),y=r.y-b,w=r.x-_;d.style.transform=`translate3d(${w}px,${y}px,0px) scale(${s})`,r={x:w,y:y},a.preventDefault()}function t(a){r={x:parseInt(e()[0]),y:parseInt(e()[1])},p=a.x,l=a.y;const s=d.getBoundingClientRect();m=s.width,h=s.height,document.addEventListener("mousemove",c),document.addEventListener("mouseup",n)}function c(a){console.log(r);let s=G;if(v=!0,$=r.y+(a.y-l),g=r.x+(a.x-p),!b){$<0&&($=0),g<0&&(g=0);const a=A.offsetWidth-m,s=A.offsetHeight-h;$>s&&($=s),g>a&&(g=a)}d.style.transform=`translate3d(${g}px,${$}px,0px) scale(${s})`}function n(){v&&(r={x:g,y:$}),document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",n),1==devmode&&o("x:"+g+"  y:"+$)}z.scale;var r={x:parseInt(e()[0]),y:parseInt(e()[1])};let p,l,m,h,d=a,g=r.x,$=r.y,v=!1;const{interval:u=.1,minScale:k=.3,maxScale:f=5,slopOver:b=!0,disabledZoom:_=!1,disabledDrag:y=!1}=s;"string"==typeof a&&(d=document.querySelector(a)),d.style.transformOrigin="0 0";const{width:w,height:x}=d.getBoundingClientRect(),A=d.parentElement;d.removeEventListener("mousewheel",i),!_&&d.addEventListener("mousewheel",i,!1),!y&&d.addEventListener("mousedown",t,!0)}function o(a){var s=document.getElementsByClassName("message-notice")[0],i=document.getElementsByClassName("message-notice-hidden")[0];if(s||i)return!1;{const s=document.createElement("div"),i=document.createElement("div");i.className="message-content",i.innerHTML=a,s.appendChild(i),s.className="message-notice",document.getElementById("charinfo-wrapper").appendChild(s),setTimeout(()=>{s.className="message-notice-hidden",setTimeout(()=>{s.remove()},1500)},1500)}}function p(a){var s=300;""!=char_info.designer&&$(".painter-wrapper").css("height","60px");var i=Object.keys(dyn_list);let t='<a href="https://prts.wiki/w/画师一览#'+char_info.painter+'">'+char_info.painter+"</a>";if($(".charpainter-text a").remove(),$(".charpainter-text").append(t),$(".introduce-title").css({"background-color":"#f5f5f5",color:"#313131"}).html(charimg_params[a].introduce_name),$(".introduce-content").html(charimg_params[a].introduce),1==ta){const a=$(".introduce-wrapper").outerHeight()+$(".painter-wrapper").outerHeight();$(".charpainter").css("height",a+30+"px")}if((""!=U&&a!=U||""==U)&&(-1!=i.indexOf(a)?(""!=now_dyn&&window.clearspine(),$(".dyn-btn").css({display:"block"}),$(".dyn-btn").css({opacity:1})):(""!=now_dyn&&window.clearspine(),$(".dyn-btn").css({opacity:0}),setTimeout(function(){$(".dyn-btn").css("display","none")},300))),""!=D&&(_(),1==ta&&y(0),$("#img-"+D).removeClass("img-in"),$("#img-"+D).addClass("img-out"),$("#img-"+a).removeClass("img-out"),$("#img-"+a).addClass("img-in"),$(".charlogo-skin").removeClass("img-in").addClass("img-out"),$(".charlogo-def").removeClass("img-out").addClass("img-in"),$(".charlogo-img").removeClass("img-in").addClass("img-out")),"时装默认"==N&&($(".back[data-back='"+N+"']").removeClass("img-in"),$(".back[data-back='"+N+"']").addClass("img-out"),$(".back[data-back='默认']").removeClass("img-out"),$(".back[data-back='默认']").addClass("img-in"),$(".back-skincolor").css({transform:"rotate(0deg)"}),g("默认")),a!=U&&(1==sa&&($("#charimg-dyn").removeClass("img-in"),$("#charimg-dyn").addClass("img-out"),$("#charimg").removeClass("img-out"),$("#charimg").addClass("img-in"),$(".dyn-btn .control-btn-flex img").attr("src","https://static.prts.wiki/charinfo/img/ui/dynOn.png"),sa=0),$("#img-"+U).addClass("img-out"),$("#img-"+U).removeClass("img-in"),$("#img-"+a).addClass("img-in"),$("#img-"+a).removeClass("img-out")),0==V)console.log(charimg_params[a]),$(".charimg-wrapper").css({transition:"all "+s+"ms ease",transform:`translate3d(${charimg_params[a].x}px,${charimg_params[a].y}px,0px) scale(${charimg_params[a].scale})`}),console.log(charimg_params[a]),setTimeout(function(){$(".charimg-wrapper").css("transition","all 0s ease")},s),z=charimg_params[a],U=a,G=charimg_params[a].scale;else if(1==V){$(".charinfo-wrapper").css({width:"100vw",height:"100vh",position:"fixed"});var c=window.innerHeight,n=c/512,e=(window.innerWidth-512*n)/2;$(".charimg-wrapper").css({transition:"all 300ms ease",transform:`translate3d(${e}px,0px,0px) scale(${n})`}),setTimeout(function(){$(".charimg-wrapper").css("transition","all 0s ease")},300),now_status_txt='{"scale":'+n+"}",z=JSON.parse(now_status_txt),U=a,G=n}D="",$(".backswitch[data-back='时装默认']").css("display","none")}function l(){const a=$(".music-info").outerWidth();$(".music-btn").css({"background-color":"rgba(0,0,0,.2)",width:a+30+"px"}),$(".music-info").css("opacity","1")}function m(){1!=q&&($(".music-btn").css({"background-color":"rgba(0,0,0,.2)",width:"30px"}),$(".music-info").css("opacity","0"))}function h(){for(var a in back_list){let s="";s=a==N?'<div class="back" data-back="'+a+'" style="opacity:1"><img src="'+back_list[a].url+'" width="100%" height="100%"></div>':"默认"==a||"时装默认"==a?'<div class="back" data-back="'+a+'" style="opacity:0"><img src="'+back_list[a].url+'" width="100%" height="100%"></div>':'<div class="back" data-back="'+a+'" style="opacity:0"><img src="" width="100%" height="100%"></div>',$(".back-wrapper").append(s)}"默认"==N&&$(".char-logo").addClass("img-in")}function d(){for(var a in back_list){let s="";s=a==N?'<div class="backswitch" data-back="'+a+'" style="background:url('+back_list[a].pre_url+');background-size: 100% 100%"><div class="back-border" style="display:block"></div><div class="back-check" style="display:flex"><img src="https://static.prts.wiki/charinfo/img/ui/check.png" width="22px" style="transform:translateX(-1px)"/></div><div class="back-name">'+a+"</div></div>":'<div class="backswitch" data-back="'+a+'" style="background:url('+back_list[a].pre_url+');background-size: 100% 100%"><div class="back-border"></div><div class="back-check"><img src="https://static.prts.wiki/charinfo/img/ui/check.png" width="22px" style="transform:translateX(-1px)"/></div><div class="back-name">'+a+"</div></div>",$(".backswitcher-wrapper").append(s)}$(".backswitch[data-back='时装默认']").css("display","none")}function g(a){a!=N&&($(".music-info").text("BGM - "+back_list[a].bgmname),$(".back[data-back='"+N+"']").removeClass("img-in"),$(".back[data-back='"+N+"']").addClass("img-out"),$(".back[data-back='"+a+"']").removeClass("img-out"),$(".back[data-back='"+a+"']").addClass("img-in"),$(".backswitcher-wrapper").find(".back-check").css("display","none"),$(".backswitcher-wrapper").find(".back-border").css("display","none"),$(".backswitch[data-back='"+a+"']").find(".back-check").css("display","flex"),$(".backswitch[data-back='"+a+"']").find(".back-border").css("display","block"),1==Y&&($(".music-btn-inner img").attr("src","https://static.prts.wiki/charinfo/img/ui/musicOff.png"),$(".music-btn-inner").removeClass("music-loop"),$("#charinfo-bgm").remove(),Y=0),N=a),q&&l()}function v(){$(".back-btn").css({display:"block",opacity:"1"})}function u(){$(".back-btn").css({opacity:"0"}),setTimeout(function(){$(".back-btn").css({display:"none"})},300)}function k(){for(var a in charskin_params)if(""!=charskin_params[a].name){let s=Object.keys(charskin_params),i=(s.indexOf(a),'<div class="skinswitch" data-skin="'+a+'"><div class="skincolor" style="background:'+charskin_params[a].color+'"></div><div class="skinhead"><img src="'+charskin_params[a].head_url+'" width="100%"></div><div class="skinname"><div class="skinswitcher-logo" style="background-image: url('+charskin_params[a].brand_url+');background-size: contain;background-repeat:no-repeat;background-position:center;filter:drop-shadow(0px 0px 3px rgba(0,0,0,.4))"></div>'+charskin_params[a].name+'</div><div class="skincheck" style="opacity:0"></div></div>');$(".skinswitcher-wrapper").append(i);let t='<img id="img-'+a+'" src="'+charskin_params[a].url+'" style="opacity:0" width="100%">';$("#charimg").append(t)}}function f(){if(console.log(111,H),0==H){if($("#img-"+D).attr("src",charskin_params[D].sub_url),1==V){var a=window.innerHeight,s=a/512,i=(window.innerWidth-512*s)/2;$(".charimg-wrapper").css({transition:"all 300ms ease",transform:`translate3d(${i}px,0px,0px) scale(${s})`})}else $(".charimg-wrapper").css({transition:"all .3s ease",transform:`translate3d(${charskin_params[D].sub_x}px,${charskin_params[D].sub_y}px,0px) scale(${charskin_params[D].sub_scale})`});setTimeout(function(){$(".charimg-wrapper").css("transition","all 0s ease")},300)}else{if($("#img-"+D).attr("src",charskin_params[D].url),1==V){a=window.innerHeight,s=a/512,i=(window.innerWidth-512*s)/2;$(".charimg-wrapper").css({transition:"all 300ms ease",transform:`translate3d(${i}px,0px,0px) scale(${s})`})}else $(".charimg-wrapper").css({transition:"all .3s ease",transform:`translate3d(${charskin_params[D].x}px,${charskin_params[D].y}px,0px) scale(${charskin_params[D].scale})`});setTimeout(function(){$(".charimg-wrapper").css("transition","all 0s ease")},300)}H=!H}function b(a){if(""!=charskin_params[a].painter){let s='<a href="https://prts.wiki/w/画师一览#'+charskin_params[a].painter+'">'+charskin_params[a].painter+"</a>";$(".charpainter-text a").remove(),$(".charpainter-text").append(s)}else{let a='<a href="https://prts.wiki/w/画师一览#'+char_info.painter+'">'+char_info.painter+"</a>";$(".charpainter-text a").remove(),$(".charpainter-text").append(a)}if($(".painter-wrapper").css("height","0px"),$(".introduce-title").css({"background-color":charskin_params[a].color,color:B(charskin_params[a].color,"#f5f5f5","#313131")}).html(charskin_params[a].series),$(".introduce-content").html(charskin_params[a].introduce),1==ta){const a=$(".introduce-wrapper").outerHeight()+$(".painter-wrapper").outerHeight();$(".charpainter").css("height",a+30+"px")}if(""!=D&&a!=D||""==D){var s=Object.keys(dyn_list);-1!=s.indexOf(a)?(""!=now_dyn&&window.clearspine(),$(".dyn-btn").css({display:"block",opacity:1})):($(".dyn-btn").css({opacity:0}),""!=now_dyn&&window.clearspine(),setTimeout(function(){$(".dyn-btn").css("display","none")},300))}if(""!=D)if(a!=D&&($("#img-"+D).removeClass("img-in"),$("#img-"+D).addClass("img-out"),$("#img-"+a).removeClass("img-out"),$("#img-"+a).addClass("img-in"),"时装默认"==N&&($(".charlogo-img").removeClass("img-in").addClass("img-out"),$(".charlogo-img[data-logo="+a+"]").removeClass("img-out").addClass("img-in"),$(".back-skincolor").css({transform:"rotate(0deg)"}),setTimeout(()=>{$(".back-skincolor").css({transform:"rotate(-20deg)",background:charskin_params[a].color})},100)),(sa=1)&&($("#charimg-dyn").removeClass("img-in"),$("#charimg-dyn").addClass("img-out"),$("#charimg").removeClass("img-out"),$("#charimg").addClass("img-in"),$(".dyn-btn .control-btn-flex img").attr("src","https://static.prts.wiki/charinfo/img/ui/dynOn.png"),sa=0)),1==V){$(".charinfo-wrapper").css({width:"100vw",height:"100vh",position:"fixed"});var i=window.innerHeight,t=i/512,c=(window.innerWidth-512*t)/2;$(".charimg-wrapper").css({transition:"all 300ms ease",transform:`translate3d(${c}px,0px,0px) scale(${t})`}),setTimeout(function(){$(".charimg-wrapper").css("transition","all 0s ease")},300),now_status_txt='{"scale":'+t+"}",z=JSON.parse(now_status_txt),D=a,G=t}else 0==V&&(1==F?0==H?$(".charimg-wrapper").css({transition:"all .3s ease",transform:`translate3d(${charskin_params[a].x-150}px,${charskin_params[a].y}px,0px) scale(${charskin_params[a].scale})`}):$(".charimg-wrapper").css({transition:"all .3s ease",transform:`translate3d(${charskin_params[a].sub_x-150}px,${charskin_params[a].sub_y}px,0px) scale(${charskin_params[a].sub_scale})`}):0==H?$(".charimg-wrapper").css({transition:"all .3s ease",transform:`translate3d(${charskin_params[a].x}px,${charskin_params[a].y}px,0px) scale(${charskin_params[a].scale})`}):$(".charimg-wrapper").css({transition:"all .3s ease",transform:`translate3d(${charskin_params[a].sub_x}px,${charskin_params[a].sub_y}px,0px) scale(${charskin_params[a].sub_scale})`}),setTimeout(function(){$(".charimg-wrapper").css("transition","all 0s ease")},300),z=charskin_params[a],D=a,G=charskin_params[a].scale);if(""==D){if(0==ta&&y(1),$("#img-"+U).removeClass("img-in"),$("#img-"+U).addClass("img-out"),$("#img-"+a).removeClass("img-out"),$("#img-"+a).addClass("img-in"),1==V){$(".charinfo-wrapper").css({width:"100vw",height:"100vh",position:"fixed"});i=window.innerHeight,t=i/512,c=(window.innerWidth-512*t)/2;$(".charimg-wrapper").css({transition:"all 300ms ease",transform:`translate3d(${c}px,0px,0px) scale(${t})`}),setTimeout(function(){$(".charimg-wrapper").css("transition","all 0s ease")},300),now_status_txt='{"scale":'+t+"}",z=JSON.parse(now_status_txt),D=a,G=t}else 0==V&&(0==H?$(".charimg-wrapper").css({transition:"all .3s ease",transform:`translate3d(${charskin_params[a].x-150}px,${charskin_params[a].y}px,0px) scale(${charskin_params[a].scale})`}):$(".charimg-wrapper").css({transition:"all .3s ease",transform:`translate3d(${charskin_params[a].sub_x-150}px,${charskin_params[a].sub_y}px,0px) scale(${charskin_params[a].sub_scale})`}),setTimeout(function(){$(".charimg-wrapper").css("transition","all 0s ease")},300),z=charskin_params[a],D=a,G=charskin_params[a].scale);"默认"==N&&($(".back-skincolor").css({transform:"rotate(-20deg)",background:charskin_params[a].color}),g("时装默认"),$(".charlogo-def").removeClass("img-in").addClass("img-out"),$(".charlogo-skin").removeClass("img-out").addClass("img-in"),$(".charlogo-img[data-logo="+a+"]").removeClass("img-out").addClass("img-in")),(sa=1)&&($("#charimg-dyn").removeClass("img-in"),$("#charimg-dyn").addClass("img-out"),$("#charimg").removeClass("img-out"),$("#charimg").addClass("img-in"),$(".dyn-btn .control-btn-flex img").attr("src","https://static.prts.wiki/charinfo/img/ui/dynOn.png"),sa=0)}U="",$(".backswitch[data-back='时装默认']").css("display","block")}function _(){$(".skins-btn").find(".skins-btn-img").css("opacity","1"),$(".skins-btn").find(".skins-btn-blue").css("opacity","0"),$(".skins-btn").find(".skins-btn-text").css("color","#f5f5f5"),$(".skincheck").css("opacity","0")}function y(a){if(1==a){1==ia&&($(".charcv").css("height","30px"),$(".charcv-collapse img").attr("src","https://static.prts.wiki/charinfo/img/ui/plus.png"),ia=0);const a=$(".introduce-wrapper").outerHeight()+$(".painter-wrapper").outerHeight();$(".charpainter").css("height",a+30+"px"),$(".charpainter-collapse img").attr("src","https://static.prts.wiki/charinfo/img/ui/sub.png"),ta=1}else $(".charpainter").css("height","30px"),$(".charpainter-collapse img").attr("src","https://static.prts.wiki/charinfo/img/ui/plus.png"),ta=0}function w(){var a,s=document.createElement("AUDIO");s.id="char_voice";var i="",t="";"中文-普通话"==J?a="voice_cn":"中文-方言"==J?(a="voice_custom",i="_cn_topolect",t="_CN_TOPOLECT"):"日文"==J||-1!=la.indexOf(char_info.name)?a="voice":"英文"==J?a="voice_en":"韩文"==J?a="voice_kr":"意大利语"==J?(a="voice_custom",i="_ita",t="_ITA"):a="俄文"==J?"voice_custom":"德文"==J?"voice_custom":"联动"==J?"voice":"voice_custom";var c=A(0,voice_keys.length-1);if(ra==voice_keys[c]){let a=x(c,voice_keys),s=A(0,a.length-1);ra=a[s]}else ra=voice_keys[c];console.log(ra);var n=char_info.name;""!=U?pa=""!=charimg_params[U].voice_id?charimg_params[U].voice_id:oa:""!=D&&(pa=""!=charskin_params[D].voice_id?charskin_params[D].voice_id:oa),"阿米娅(近卫)"!=n&&"阿米娅(医疗)"!=n||(n="阿米娅"),s.src="https://torappu.prts.wiki/assets/audio/"+a+"/"+pa+i+"/"+ra+".mp3",s.volume=.8,s.load(),$(".charvoice-wrapper audio").remove(),$(".charvoice-wrapper").append(s),s.oncanplay=function(){0==na&&($(".charvoice-wrapper").css("opacity","1"),$(".charvoice-wrapper").css("pointer-events","auto"));var a=charvoice_list[pa+t][ra];a=a.replace(/{@nickname}/,doc_name),$(".charvoice-content").html(a);let i=$(".charvoice-content").outerHeight();$(".charvoice-wrapper").css("height",i+"px"),s.play(),na=1,clearTimeout(ea),ea=setTimeout(()=>{$(".charvoice-wrapper").css("opacity","0"),$(".charvoice-wrapper").css("pointer-events","none"),now_voice_index="",na=0},1e3*s.duration)}}function x(a){let s=JSON.stringify(voice_keys);return s=JSON.parse(s),s.splice(a,1),s}function A(a,s){return a=Math.ceil(a),s=Math.floor(s),Math.floor(Math.random()*(s-a+1))+a}function C(a){for(var s in char_json)char_json[s].name==a&&(result=char_json[s].id);return result}function T(a){let s=new SpineApi(document.getElementById("dyn-canvas"));var i="//static.prts.wiki/spine38/dyn/"+dyn_list[a].id+"/"+dyn_list[a].id+"/"+dyn_list[a].id,t="//static.prts.wiki/spine38/dynbg/"+dyn_list[a].id+"/"+dyn_list[a].id;$(".dyn-bg").css("display","none"),$(".dyn-fg").css("display","none"),""!=dyn_list[a].bg?$(".dyn-bg").css("background-image","url("+t+"_bg.png)"):$(".dyn-bg").css("background-image","none"),""!=dyn_list[a].fg?$(".dyn-fg").css("background-image","url("+t+"_fg.png)"):$(".dyn-fg").css("background-image","none"),s.load(a,i+".skel",i+".atlas",{scale:dyn_list[a].scale,x:dyn_list[a].x,y:dyn_list[a].y}).then(function(i){for(var t in now_dyn=a,$.extend(window,{setani:function(a){i.state.setAnimation(0,a,!0)},clearspine:function(){s.activeSkeleton="",now_dyn=""}}),console.log(dyn_list),console.log(i.skeleton.data.animations),console.log(s),$(".chardyn-content").html(""),i.skeleton.data.animations){console.log(i.skeleton.data.animations[t].name);let a="";a=0==t?'<div class="chardyn-select" data-ani="'+i.skeleton.data.animations[t].name+'"><div class="dyncheck chardyn-check"></div><div class="dyncontent chardyn-check-content"><div class="ani-index">动作'+t+'</div><div class="ani-name">'+i.skeleton.data.animations[t].name+"</div></div></div>":'<div class="chardyn-select" data-ani="'+i.skeleton.data.animations[t].name+'"><div class="dyncheck chardyn-uncheck"></div><div class="dyncontent chardyn-uncheck-content"><div class="ani-index">动作'+t+'</div><div class="ani-name">'+i.skeleton.data.animations[t].name+"</div></div></div>",$(".chardyn-content").append(a)}if(1==ca){const a=$(".chardyn-content").outerHeight();$(".dynControler").css("height",a+40+"px")}s.play(a),$(".dyn-bg").css("display","block"),$(".dyn-fg").css("display","block"),i.state.setAnimation(0,"Idle",!0)})}function O(a){let s=new SpineApi(document.getElementById("dyn-canvas-m"));var i="//static.prts.wiki/spine38/dyn/"+dyn_list[a].id+"/"+dyn_list[a].id+"/"+dyn_list[a].id,t="//static.prts.wiki/spine38/dynbg/"+dyn_list[a].id+"/"+dyn_list[a].id;$(".dyn-bg-m").css("display","none"),$(".dyn-fg-m").css("display","none"),""!=dyn_list[a].bg?$(".dyn-bg-m").css("background-image","url("+t+"_bg.png)"):$(".dyn-bg-m").css("background-image","none"),""!=dyn_list[a].fg?$(".dyn-fg-m").css("background-image","url("+t+"_fg.png)"):$(".dyn-fg-m").css("background-image","none"),s.load(a,i+".skel",i+".atlas",{scale:dyn_list[a].scale,x:dyn_list[a].x,y:dyn_list[a].y}).then(function(i){for(var t in now_dyn=a,$.extend(window,{setani:function(a){i.state.setAnimation(0,a,!0)},clearspine:function(){s.activeSkeleton="",now_dyn=""}}),console.log(dyn_list),console.log(i),console.log(s),i.skeleton.data.animations){console.log(i.skeleton.data.animations[t].name);i.skeleton.data.animations[t].name,i.skeleton.data.animations[t].name}s.play(a),$(".dyn-bg-m").css("display","block"),$(".dyn-fg-m").css("display","block"),i.state.setAnimation(0,"Idle",!0),$("body").on("click","button",function(){let a=$(this).attr("data-ani");i.state.setAnimation(0,a,!0)})})}function E(a,s){var i={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"},t=new Image;t.onload=function(){var i=t.width>0&&t.height>0;s(a,i)},t.onerror=function(){s(a,!1)},t.src="data:image/webp;base64,"+i[a]}function B(a,s,i){var t="#"===a.charAt(0)?a.substring(1,7):a,c=parseInt(t.substring(0,2),16),n=parseInt(t.substring(2,4),16),e=parseInt(t.substring(4,6),16);return.299*c+.587*n+.114*e>186?i:s}var I={"罗德岛":"//media.prts.wiki/6/66/Logo_rhodesOverride.png","彩虹小队":"//media.prts.wiki/7/76/Logo_彩虹小队.png"},Q=["Touch","Stormeye","Sharp","Pith","郁金香","预备干员-后勤","预备干员-术师","预备干员-狙击","预备干员-近战","预备干员-重装"];-1!=Q.indexOf(char_info.name)&&$(".voice-btn").css("display","none");var H=!1;let S=$(".charinfo-container").parent().parent();p_w=S.innerWidth();var L=0;if(p_w<600){L=1;let a=p_w/600;$(".charinfo-wrapper").css("transform","scale("+a+")"),$(".charinfo-container").css("width",600*a+"px"),$(".charinfo-container").css("height",800*a+"px")}if(char_info.nameCustom?$(".charname").text(char_info.nameCustom):$(".charname").text(char_info.name),$(".charname-en").text(char_info.nameEn),$(".charstar img").attr("src","https://static.prts.wiki/charinfo/img/star_"+(char_info.star+1)+".png"),$(".charclass-img img").attr("src","https://static.prts.wiki/charinfo/img/class_"+char_info.class+".png"),$(".branch-img").css("background-image","url(https://static.prts.wiki/charinfo/img/branch/"+char_info.branch+".png)"),$(".branch-text").append('<a href="https://prts.wiki/w/干员一览#?subProfession=1-'+char_info.branch+'">'+char_info.branch+"</a>"),$(".char-pos-text").append('<a href="https://prts.wiki/w/干员一览#?position=1-'+char_info.pos+'">'+char_info.pos+"</a>"),-1!=char_info.tag.indexOf(" ")){var P=char_info.tag.split(" ");for(var R in P)$(".char-tag-flex").append('<div class="char-tag"><a href="https://prts.wiki/w/干员一览#?tag=1-'+P[R]+'">'+P[R]+"</a></div>")}else $(".char-tag-flex").append('<div class="char-tag"><a href="https://prts.wiki/w/干员一览#?tag=1-'+char_info.tag+'">'+char_info.tag+"</a></div>");let W=char_info.painter.split("、");for(var R in W)$(".charpainter-text").append('<a href="https://prts.wiki/w/画师一览#'+W[R]+'">'+W[R]+"</a> ");if(""!=char_info.designer){$(".painter-wrapper").css("height","60px");let a=char_info.painter.split("、"),s=char_info.designer.split("、");for(var R in a)$(".painter-name").append('<a href="https://prts.wiki/w/画师一览#'+a[R]+'">'+a[R]+"</a> ");for(var R in s)$(".designer-name").append('<a href="https://prts.wiki/w/画师一览#'+s[R]+'">'+s[R]+"</a> ")}$(".paintercv-wrapper").on("click","a",function(a){a.stopPropagation()});var J=char_info.initcvtype,U="elite0";"阿米娅(近卫)"!=char_info.name&&"阿米娅(医疗)"!=char_info.name||(U="elite2");var N=""==char_info.initback?"默认":char_info.initback,D="",G=charimg_params[U].scale,z=charimg_params[U];s(char_info.initcvtype),$(".introduce-title").css({"background-color":"#f5f5f5",color:"#313131"}).html(charimg_params[U].introduce_name),$(".introduce-content").html(charimg_params[U].introduce),$(".music-info").text("BGM - "+back_list[N].bgmname),$(".charimg-wrapper").css("transform",`translate3d(${charimg_params[U].x}px,${charimg_params[U].y}px,0px) scale(${charimg_params[U].scale})`),$(".charimg-wrapper").css("transition","all 0s ease"),""!=charskin_params.skin1.name&&$(".skins-btn").css("display","inline-block");var M,j,X="";E("lossy",function(s,i){console.log("lossy:",i),M=i,E("alpha",function(s,i){for(var t in console.log("alpha:",i),j=i,M&&j&&(X="?image_process=format,webp/quality,Q_90"),charimg_params.elite0.url="//media.prts.wiki/"+getPath("立绘_"+char_info.name+"_1.png")+X,"阿米娅"==char_info.name&&(charimg_params.elite1.url="//media.prts.wiki/"+getPath("立绘_"+char_info.name+"_1+.png")+X),char_info.star>=3?-1!=Q.indexOf(char_info.name)?charimg_params.elite2.url="//media.prts.wiki/"+getPath("立绘_"+char_info.name+"_1.png")+X:charimg_params.elite2.url="//media.prts.wiki/"+getPath("立绘_"+char_info.name+"_2.png")+X:charimg_params.elite2.url="","阿米娅(近卫)"!=char_info.name&&"阿米娅(医疗)"!=char_info.name||(charimg_params.elite0.url="",charimg_params.elite1.url=""),charskin_params)if(""!=charskin_params[t].name&&""==charskin_params[t].url){charskin_params[t].url="//media.prts.wiki/"+getPath("立绘_"+char_info.name+"_"+t+".png")+X,charskin_params[t].head_url="//media.prts.wiki/"+getPath("头像_"+char_info.name+"_"+t+".png")+X;let a=charskin_params[t].series.split("/");var e=a[0];a.length>2&&(e=a[0]+"-"+a[1]),charskin_params[t].brand_url="//media.prts.wiki/"+getPath("Skin_brand_"+e+".png")+X,charskin_params[t].logo_url="//media.prts.wiki/"+getPath("Skin_logo_"+e+".png")+X,1==charskin_params[t].sub_skin&&(charskin_params[t].sub_url="//media.prts.wiki/"+getPath("立绘_"+char_info.name+"_"+t+"_sp.png")+X)}for(var t in back_list)back_list[t].url+=X,back_list[t].pre_url+=X;n(),c(),k(),a()})}),r("#charimg-wrapper"),document.addEventListener("fullscreenchange",function(a){});var V=0;$(".fullscreen-btn").on("click",function(){if(0==V){o("进入全屏"),$(".fullscreen-btn img").attr("src","https://static.prts.wiki/charinfo/img/ui/refullscreen.png"),$(".charinfo-wrapper").css({width:"100vw",height:"100vh",position:"fixed",top:"0px",left:"0px","z-index":"999"}),$("body").css("overflow","hidden"),$("#mw-panel").length>0&&$("#mw-panel").css("z-index","-1"),$("#mw-head").length>0&&$("#mw-head").css("z-index","-1"),$(".backToTop").css("z-index","-1");var a=window.innerHeight,s=a/512,i=(window.innerWidth-512*s)/2;$(".charimg-wrapper").css({transition:"all 300ms ease",transform:`translate3d(${i}px,0px,0px) scale(${s})`}),setTimeout(function(){$(".charimg-wrapper").css("transition","all 0s ease")},300),now_status_txt='{"scale":'+s+"}",z=JSON.parse(now_status_txt),G=s,V=1}else o("退出全屏"),$(".fullscreen-btn img").attr("src","https://static.prts.wiki/charinfo/img/ui/fullscreen.png"),$(".charinfo-wrapper").css({width:"1024px",height:"576px",position:"relative"}),$("body").css("overflow","inherit"),$("#mw-panel").length>0&&$("#mw-panel").css("z-index","auto"),$("#mw-head").length>0&&$("#mw-head").css("z-index","auto"),$(".backToTop").css("z-index","9999"),V=0,""!=D?b(D):p(U)}),$(".stage-btn-wrapper").on("click",".stage-btn",function(){var a=$(this).attr("elite");p("elite"+a),$(".stage-btn-img").css("opacity","1"),$(".stage-btn-blue").css("opacity","0"),$(".stage-btn-text").css("color","#f5f5f5"),$(this).find(".stage-btn-img").css("opacity","0"),$(this).find(".stage-btn-blue").css("opacity","1"),$(this).find(".stage-btn-text").css("color","#1ac2fd"),i()});var Y=0;$(".music-btn").on("click",function(){if(0==Y){o("开始播放");var a=document.createElement("AUDIO");a.id="charinfo-bgm",a.src=back_list[N].bgm,a.volume=.45,a.load(),$("body").append(a),a.play(),a.oncanplay=function(){},a.addEventListener("ended",function(){a.currentTime=back_list[N].loop_point,a.play()},!1),Y=1,$(".music-btn-inner img").attr("src","https://static.prts.wiki/charinfo/img/ui/musicOn.png"),$(".music-btn-inner").addClass("music-loop")}else o("停止播放"),$(".music-btn-inner img").attr("src","https://static.prts.wiki/charinfo/img/ui/musicOff.png"),$(".music-btn-inner").removeClass("music-loop"),
$("#charinfo-bgm").remove(),Y=0}),$(".music-btn").on("mouseover",function(){l()}),$(".music-btn").on("mouseleave",function(){m()}),h();var q=0,K=0;$(".backswitcher-btn").on("click",function(){0==K&&setTimeout(function(){d(),K=1},300),0==q&&($(".top-btns").removeClass("img-in"),$(".top-btns").addClass("img-out"),setTimeout(function(){$(".top-btns").css("display","none")},300),$(".charname-wrapper").css("bottom","0px"),$(".paintercv-wrapper").css("left","-300px"),$(".control-btns").css("right","-120px"),$(".charstar").css("opacity","0"),$(".bottom-btns").css("bottom","-60px"),$(".backswitcher-bg").css("right","0px"),$(".hiddenchar-btn").css("display","block"),q=1,0==V&&(""!=D?0==H?$(".charimg-wrapper").css({transition:"all .3s ease",transform:`translate3d(${charskin_params[D].x-150}px,${charskin_params[D].y}px,0px) scale(${charskin_params[D].scale})`}):$(".charimg-wrapper").css({transition:"all .3s ease",transform:`translate3d(${charskin_params[D].sub_x-150}px,${charskin_params[D].sub_y}px,0px) scale(${charskin_params[D].sub_scale})`}):$(".charimg-wrapper").css({transition:"all .3s ease",transform:`translate3d(${charimg_params[U].x-150}px,${charimg_params[U].y}px,0px) scale(${charimg_params[U].scale})`}),setTimeout(function(){$(".charimg-wrapper").css("transition","all 0s ease")},300)),l(),v(),$(".backswitcher-btn").css("opacity","0"),setTimeout(function(){$(".backswitcher-btn").css("display","none")},300))}),$(".backswitcher-wrapper").on("click",".backswitch",function(){var a=$(this).attr("data-back");a!=N&&($(".back[data-back='"+a+"']").find("img").attr("src",back_list[a].url),$(".music-info").text("BGM - "+back_list[a].bgmname),$(".back[data-back='"+N+"']").removeClass("img-in"),$(".back[data-back='"+N+"']").addClass("img-out"),$(".back[data-back='"+a+"']").removeClass("img-out"),$(".back[data-back='"+a+"']").addClass("img-in"),$(".backswitcher-wrapper").find(".back-check").css("display","none"),$(".backswitcher-wrapper").find(".back-border").css("display","none"),$(this).find(".back-check").css("display","flex"),$(this).find(".back-border").css("display","block"),1==Y&&($(".music-btn-inner img").attr("src","https://static.prts.wiki/charinfo/img/ui/musicOff.png"),$(".music-btn-inner").removeClass("music-loop"),$("#charinfo-bgm").remove(),Y=0),"时装默认"==N&&$(".back-skincolor").css({transform:"rotate(0deg)"}),"时装默认"==a&&$(".back-skincolor").css({transform:"rotate(-20deg)",background:charskin_params[D].color}),"默认"!=a&&"时装默认"!=a?$(".char-logo").removeClass("img-in").addClass("img-out"):$(".char-logo").removeClass("img-out").addClass("img-in"),N=a),l()});var Z=0;$(".hiddenchar-btn").on("click",function(){(q||F)&&(1==Z?(Z=0,$(".charimg-wrapper").css({transition:"all .3s ease",opacity:"1"}),$(".hiddenchar-btn-img img").attr("src","https://static.prts.wiki/charinfo/img/ui/eyeOn.png"),setTimeout(function(){$(".charimg-wrapper").css("transition","all 0s ease")},300)):(Z=1,$(".hiddenchar-btn-img img").attr("src","https://static.prts.wiki/charinfo/img/ui/eyeOff.png"),$(".charimg-wrapper").css({transition:"all .3s ease",opacity:"0"}),setTimeout(function(){$(".charimg-wrapper").css("transition","all 0s ease")},300)))}),$(".back-btn").on("click",function(){1==q&&($(".top-btns").css("display","block"),$(".top-btns").removeClass("img-out"),$(".top-btns").addClass("img-in"),$(".backswitcher-bg").css("right","-400px"),$(".bottom-btns").css("bottom","10px"),$(".charname-wrapper").css("bottom","70px"),$(".paintercv-wrapper").css("left","10px"),$(".control-btns").css("right","10px"),$(".charstar").css("opacity","1"),0==V&&(""!=D?b(D):p(U)),q=0,$(".hiddenchar-btn").css("display","none"),1==Z&&(Z=0,$(".charimg-wrapper").css({transition:"all .3s ease",opacity:"1"}),$(".hiddenchar-btn-img img").attr("src","https://static.prts.wiki/charinfo/img/ui/eyeOn.png"),setTimeout(function(){$(".charimg-wrapper").css("transition","all 0s ease")},300)),m(),u(),$(".backswitcher-btn").css({display:"inline-block",opacity:"1"})),1==F&&(0==L?($(".bottom-btns").css("bottom","10px"),$(".charname-wrapper").css("bottom","70px"),$(".paintercv-wrapper").css("left","10px"),$(".control-btns").css("right","10px")):($(".bottom-btns").css("bottom","55px"),$(".charname-wrapper").css("bottom","113px"),$(".paintercv-wrapper").css("right","10px"),$(".control-btns").css("bottom","10px")),$(".top-btns").css("display","block"),$(".top-btns").removeClass("img-out"),$(".top-btns").addClass("img-in"),$(".charstar").css("opacity","1"),$(".music-btn").css("display","block"),$(".music-btn").css("opacity","1"),F=0,$(".skinswitcher-bg").css({right:"-400px"}),$(".skincolor").css("width","290px"),$(".hiddenchar-btn").css("display","none"),$(".hiddenchar-btn-img img").attr("src","https://static.prts.wiki/charinfo/img/ui/eyeOn.png"),1==Z&&(Z=0,$(".charimg-wrapper").css({transition:"all .3s ease",opacity:"1"}),setTimeout(function(){$(".charimg-wrapper").css("transition","all 0s ease")},300)),""!=D?(b(D),$(".stage-btn-img").css("opacity","1"),$(".stage-btn-blue").css("opacity","0"),$(".stage-btn-text").css("color","#f5f5f5"),$(".skins-btn").find(".skins-btn-img").css("opacity","0"),$(".skins-btn").find(".skins-btn-blue").css("opacity","1"),$(".skins-btn").find(".skins-btn-text").css("color","#1ac2fd")):p(U),u()),1==aa&&(""!=D?b(D):""!=U&&p(U),1==sa&&($(".dynControler").css("opacity","0"),$(".dynControler").css("pointer-events","none")),aa=0,u(),$(".hiddenchar-btn").css("display","none"),$(".top-btns").css("display","block"),$(".top-btns").removeClass("img-out"),$(".top-btns").addClass("img-in"),$(".charimg-mask").css("opacity","1"),$(".charimg-mask").css("pointer-events","inherit"),$(".bottom-btns").css("bottom","10px"),$(".charname-wrapper").css("left","10px"),$(".music-btn").css("display","block"),$(".music-btn").css("opacity","1"),$(".paintercv-wrapper").css("left","10px"),$(".control-btns").css("right","10px"))});var F=0;$(".skins-btn").on("click",function(){if(""==charskin_params.skin1.name)return o("暂无时装"),!1;0==F&&(F=1,0==L?($(".hiddenchar-btn").css("display","block"),$(".top-btns").removeClass("img-in"),$(".top-btns").addClass("img-out"),$(".charname-wrapper").css("bottom","0px"),$(".paintercv-wrapper").css("left","-300px"),$(".control-btns").css("right","-120px"),$(".charstar").css("opacity","0"),$(".bottom-btns").css("bottom","-60px"),$(".music-btn").css("opacity","0"),setTimeout(function(){$(".top-btns").css("display","none"),$(".music-btn").css("display","none")},300),v(),$(".skinswitcher-bg").css({right:"0px"}),setTimeout(function(){$(".skincolor").css("width","7px")},200),0==V&&(""!=D?0==H?$(".charimg-wrapper").css({transition:"all .3s ease",transform:`translate3d(${charskin_params[D].x-150}px,${charskin_params[D].y}px,0px) scale(${charskin_params[D].scale})`}):$(".charimg-wrapper").css({transition:"all .3s ease",transform:`translate3d(${charskin_params[D].sub_x-150}px,${charskin_params[D].sub_y}px,0px) scale(${charskin_params[D].sub_scale})`}):$(".charimg-wrapper").css({transition:"all .3s ease",transform:`translate3d(${charimg_params[U].x-150}px,${charimg_params[U].y}px,0px) scale(${charimg_params[U].scale})`}),setTimeout(function(){$(".charimg-wrapper").css("transition","all 0s ease")},300))):($(".hiddenchar-btn").css("display","block"),$(".top-btns").removeClass("img-in"),$(".top-btns").addClass("img-out"),$(".charname-wrapper").css("bottom","0px"),$(".paintercv-wrapper").css("right","-300px"),$(".control-btns").css("bottom","-60px"),$(".charstar").css("opacity","0"),$(".bottom-btns").css("bottom","-60px"),$(".music-btn").css("opacity","0"),setTimeout(function(){$(".top-btns").css("display","none"),$(".music-btn").css("display","none")},300),v(),$(".skinswitcher-bg").css({right:"0px"}),setTimeout(function(){$(".skincolor").css("width","7px")},200),0==V&&(""!=D?$(".charimg-wrapper").css({transition:"all .3s ease",transform:`translate3d(${charskin_params[D].x-150}px,${charskin_params[D].y}px,0px) scale(${charskin_params[D].scale})`}):$(".charimg-wrapper").css({transition:"all .3s ease",transform:`translate3d(${charimg_params[U].x-150}px,${charimg_params[U].y}px,0px) scale(${charimg_params[U].scale})`}),setTimeout(function(){$(".charimg-wrapper").css("transition","all 0s ease")},300))))}),$(".skinswitcher-wrapper").on("click",".skinswitch",function(){let a=$(".skinswitcher-wrapper .skinswitch").index(this)+1;H=!1,$("#img-skin"+a).attr("src",charskin_params["skin"+a].url),$(".skincheck").css("opacity","0"),$(this).find(".skincheck").css("opacity","1"),1==charskin_params["skin"+a].sub_skin?$(".img-switch-btn").css("display","flex"):$(".img-switch-btn").css("display","none"),H=!1,b("skin"+a),console.log(char_info.cv),console.log(char_info.cv[J]),console.log(char_info.cv[J]["skin"+a]),""!=char_info.cv[J]["skin"+a]&&t()}),$(".img-switch-btn").on("click",function(){f()});var aa=0;$(".watchimg-btn").on("click",function(){aa=1,o("鼠标滚轮缩放，拖拽移动"),$(".top-btns").removeClass("img-in"),$(".top-btns").addClass("img-out"),$(".music-btn").css("opacity","0"),setTimeout(function(){$(".top-btns").css("display","none"),$(".music-btn").css("display","none")},300),v(),$(".charimg-mask").css("opacity","0"),$(".charimg-mask").css("pointer-events","none"),$(".charname-wrapper").css("left","-400px"),$(".paintercv-wrapper").css("left","-300px"),$(".bottom-btns").css("bottom","-60px"),$(".control-btns").css("right","-120px"),1==sa&&($(".dynControler").css("opacity","1"),$(".dynControler").css("pointer-events","auto"))});var sa=0;$(".dyn-btn").on("click",function(){0==sa?(""==now_dyn&&($(".canvas-wrapper canvas").remove(),$(".canvas-wrapper").append('<canvas id="dyn-canvas" width="2048" height="2048" style="transform:scale(0.25);transform-origin:left top;background-color:rgba(0,0,0,0);"></canvas>'),""!=D?T(D):""!=U&&T(U)),$("#charimg").removeClass("img-in"),$("#charimg").addClass("img-out"),$("#charimg-dyn").removeClass("img-out"),$("#charimg-dyn").addClass("img-in"),$(".dyn-btn img").attr("src","https://static.prts.wiki/charinfo/img/ui/dynOff.png"),sa=1):($("#charimg-dyn").removeClass("img-in"),$("#charimg-dyn").addClass("img-out"),$("#charimg").removeClass("img-out"),$("#charimg").addClass("img-in"),$(".dyn-btn img").attr("src","https://static.prts.wiki/charinfo/img/ui/dynOn.png"),sa=0)});var ia=0;$(".charcv-title").on("click",function(){if(0==ia){1==ta&&($(".charpainter").css("height","30px"),$(".charpainter-collapse img").attr("src","https://static.prts.wiki/charinfo/img/ui/plus.png"),ta=0);const a=$(".charcv-content").outerHeight();$(".charcv").css("height",a+40+"px"),$(".charcv-collapse img").attr("src","https://static.prts.wiki/charinfo/img/ui/sub.png"),ia=1}else $(".charcv").css("height","30px"),$(".charcv-collapse img").attr("src","https://static.prts.wiki/charinfo/img/ui/plus.png"),ia=0}),$(".charcv-content").on("click",".charcv-select",function(){let a=$(this).attr("data-cvtype"),s=$(this).attr("data-cvname");$(".cvcheck").removeClass("charcv-check").addClass("charcv-uncheck"),$(".cvcontent").removeClass("charcv-check-content").addClass("charcv-uncheck-content"),$(this).find(".cvcheck").removeClass("charcv-uncheck").addClass("charcv-check"),$(this).find(".cvcontent").removeClass("charcv-uncheck-content").addClass("charcv-check-content"),temp_cv_list=s.split(",");for(var i=0;i<temp_cv_list.length;i++)0==i?($(".charcv-text").html(""),$(".charcv-text").append('<a href="https://prts.wiki/w/配音一览#'+a+"："+temp_cv_list[i]+'">'+temp_cv_list[i]+"</a>")):$(".charcv-text").append(' & <a href="https://prts.wiki/w/配音一览#'+a+"："+temp_cv_list[i]+'">'+temp_cv_list[i]+"</a>");J=a});var ta=0;$(".charpainter-title").on("click",function(){y(0==ta?1:0)});var ca=0;$(".chardyn-title").on("click",function(){if(0==ca){const a=$(".chardyn-content").outerHeight();$(".dynControler").css("height",a+40+"px"),$(".chardyn-collapse img").attr("src","https://static.prts.wiki/charinfo/img/ui/sub.png"),ca=1}else $(".dynControler").css("height","30px"),$(".chardyn-collapse img").attr("src","https://static.prts.wiki/charinfo/img/ui/plus.png"),ca=0});var na=0;$(".voice-btn").on("click",function(){w()}),$(".charvoice-wrapper").on("click",function(){$(".charvoice-wrapper").css("opacity","0"),$(".charvoice-wrapper").css("pointer-events","none"),$(".charvoice-wrapper audio").remove(),na=0});var ea=null,ra="",oa=C(char_info.name),pa="",la=["灰烬","战车","霜华","闪击","艾拉","医生","双月","导火索"];$(".download-btn").on("click",function(){if(""!=U)var a=charimg_params[U].url;else if(""!=D)if(H)a=charskin_params[D].sub_url;else a=charskin_params[D].url;var s=a.indexOf("?");a=a.slice(0,s);var i=document.createElement("a"),t=new MouseEvent("click");i.target="_blank",i.href=a,i.dispatchEvent(t)}),$(".watchimg-btn-m").on("click",function(){$(".charimg-m").css("display","flex"),$("body").css("overflow","hidden"),1==sa?($(".charimg-m .img-m-nodyn").css("display","none"),$(".charimg-m .img-m-dyn").css("display","block"),$(".charimg-m .img-m-dyn").html(""),$(".charimg-m .img-m-dyn").append('<div class="dyn-bg-m"></div><div class="img-m-canvas-container"><canvas id="dyn-canvas-m" width="2048" height="2048" style="transform:scale(0.25);transform-origin:left top;background-color:rgba(0,0,0,0);"></canvas></div><div class="dyn-fg-m"></div>'),window_w=window.innerWidth,$(".img-m-canvas-container").css("transform","scale("+window_w/512+")"),O(now_dyn)):""!=U?($(".charimg-m .img-m-nodyn").css("display","block"),$(".charimg-m .img-m-dyn").css("display","none"),$(".charimg-m .img-m-nodyn img").attr("src",charimg_params[U].url)):""!=D&&($(".charimg-m .img-m-nodyn").css("display","block"),$(".charimg-m .img-m-dyn").css("display","none"),H?$(".charimg-m .img-m-nodyn img").attr("src",charskin_params[D].sub_url):$(".charimg-m .img-m-nodyn img").attr("src",charskin_params[D].url))}),$(".charimg-m-close").on("click",function(){$(".charimg-m").css("display","none"),$("body").css("overflow","auto")}),$(".chardyn-content").on("click",".chardyn-select",function(){let a=$(this).attr("data-ani");window.setani(a),$(".dyncheck").removeClass("chardyn-check").addClass("chardyn-uncheck"),$(".dyncontent").removeClass("chardyn-check-content").addClass("chardyn-uncheck-content"),$(this).find(".dyncheck").removeClass("chardyn-uncheck").addClass("chardyn-check"),$(this).find(".dyncontent").removeClass("chardyn-uncheck-content").addClass("chardyn-check-content")})}]);